{% extends 'base.html' %}
{% block main %}
{% if leagues %}
<form method="POST" action="/invest" class="mb-2">
    <div class="cont col-md-4">
        <div class="form-floating">
            <input class="form-control" type="text" id="amount" name="amount" placeholder="Amount">
            <label for="amount" class="form-text">Any currency ($,€,£,¥)</label>
        </div>
    </div>
    <div class="cont col-md-4">
        <div class="form-floating">
            <input class="form-control" type="text" id="num_matches" name="num_matches" min="1" max="20" placeholder="Games">
            <label class="form-text" for="num_matches">Number of Matches</label>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-4">
    <div class="form-check m-2">
        <input class="form-check-input" type="checkbox" id="check-all" checked>
        <label class="form-check-label" for="check-all">
            Check/Uncheck All
        </label>
    </div>
    </div>
    <div class="col-sm-4">
        {% for league in leagues[0:3] %}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="{{ league }}" name="leagues[]" id="league-{{ league }}" checked>
          <label class="form-check-label" for="league-{{ league }}">
            {{ league }}
          </label>
        </div>
        {% endfor %}
      </div>
      <div class="col-sm-4">
        {% for league in leagues[3:6] %}
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="{{ league }}" name="leagues[]" id="league-{{ league }}" checked>
          <label class="form-check-label" for="league-{{ league }}">
            {{ league }}
          </label>
        </div>
        {% endfor %}
      </div>
    </div>
    <input type="submit" value="Submit" class="m-2 btn btn-primary">
</form>
{% else %}
    <p class="mx-2 my-4">No predictions available for the current week.<br><br>
        There may not be matches in the countries first division leages for the current week.</p>
{% endif %}

{% if leagues %}
<div>
    {% if predictions %}
    <div>Amount desired to bet: <b>{{ inputs[0] }}</b></div>
    <div>Matches to bet: <b>{{ inputs[1] }}</b></div>
    <div>Leagues selected: <b>{% for selected_league in selected_leagues %} {{ selected_league[0]|upper}}{{selected_league[1:]}}, {% endfor %}</b></div>
    <table class="table table-hover">
        <thead>
            <tr>
                <th>League <br>
                    <select class="filter-header" data-col-index="0">
                        <option value="">All</option></th>
                <!-- <th>Round</th> -->
                <!-- <th>Week</th> -->
                <!-- <th>Year</th> -->
                <th>Date <br>
                    <select class="filter-header" data-col-index="1">
                        <option value="">All</option></th>
                <th>Local <br>
                    <select class="filter-header" data-col-index="2">
                        <option value="">All</option></th>
                <th>Goals Local </th>
                <th>Goals Visitor </th>
                <th>Visitor <br>
                    <select class="filter-header" data-col-index="5">
                        <option value="">All</option></th>
                <th>Victor <br>
                    <select class="filter-header" data-col-index="6">
                        <option value="">All</option></th>
                <th>Probability <br>
                    <!-- <select class="filter-header" data-col-index="7">
                        <option value="">All</option></th> -->
                <!-- <th>Real Result <br>
                    <select class="filter-header" data-col-index="9">
                        <option value="">All</option></th> -->
                <th>Bet Amount <br>
                    <!-- <select class="filter-header" data-col-index="9">
                        <option value="">All</option></th> -->
            </tr>
        </thead>
        <tbody>
            {% for prediction in predictions %}
            <tr>
                <td class="d-flex flex-row align-items-center"><img class="mx-2" src="{{ prediction.flag_url }}" alt="{{ prediction.League }}"><br/><div class="mx-2">{{ prediction.League[0]|upper}}{{prediction.League[1:]}}</div></td>
                <!-- <td>{{ prediction.League[0]|upper}}{{prediction.League[1:]}}</td> -->
                <!-- <td>{{ prediction.Round }}</td> -->
                <!-- <td>{{ prediction.Week }}</td> -->
                <!-- <td>{{ prediction.Year }}</td> -->
                <td>{{ prediction.Date.strftime('%b %d, %Y') }}</td>
                <td>{{ prediction.Local }}</td>
                <td class="local">{{ prediction.phg | int }}</td>
                <td class="visitor">{{ prediction.pag | int }}</td>
                <td>{{ prediction.Visitor }}</td>
                <td>{{ prediction.bet }}</td>
                <td>{{ '%.1f' %  (prediction.max_prob * 100) }} %</td>
                <!-- <td>{{ prediction.result }}</td> -->
                <td>{{ "%.2f" % prediction.bet_amount }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
    <p>Enter the amount of money you want to invest in any currency, select the number of matches
        you want to bet on (default is 10), and choose the Leagues you're interested in.</p>
   {% endif %}
</div>  

{% endif %}
{% endblock %}