{% extends 'base.html' %}
{% block main %}
<!-- <div class="d-flex justify-content-center"> -->
<div class="search-container col-6">
    <input class="form-control " type="text" placeholder="Search team..." id="search-input">
</div>
<!-- </div> -->
<table class="table table-hover">
    <thead>
        <tr>
            <th scope="col" data-sort-by="league">League <br>
                <select class="filter-header" data-col-index="0">
                    <option value="">All</option>
                </select>
            </th>
            
            <th>Week
                <!-- <select class="filter-header" data-col-index="1">
                    <option value="">All</option>
                </select> -->
            </th>
            <th>Date <br>
                <select class="filter-header" data-col-index="2">
                    <option value="">All</option>
                </select>
            </th>
            <th>Local <br>
                <select class="filter-header" data-col-index="3">
                    <option value="">All</option>
                </select>
            </th>
            <!-- <th>Goals Local
                <select class="filter-header" data-col-index="4">
                    <option value="">All</option>
                </select>
            </th>
            <th>Goals Visitor
                <select class="filter-header" data-col-index="5">
                    <option value="">All</option>
                </select>
            </th> -->
            <th>Visitor <br>
                <select class="filter-header" data-col-index="6">
                    <option value="">All</option>
                </select>
            </th>
        </tr>
    </thead>
    <tbody id="table-body">
        {% for match in matches %}
        <tr class="search-teams">
            <td><img src="{{ match.flag_url }}" alt="{{ match.League }}"><br/>{{ match.League }}</td>
            <td>{{ match.Week }}</td>
            <td>{{ match.Date }}</td>
            <td>{{ match.Local }}</td>
            <!-- <td class="local">{{ match.Goalslocal }}</td>
            <td class="visitor">{{ match.Goalsvisitor }}</td> -->
            <td>{{ match.Visitor }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
<div class="card mobile-card">
    {% set grouped_matches = matches | sort(attribute='League') | groupby('Date') %}
    {% for date_group, matches_by_date in grouped_matches %}
      {% set matches_by_league = matches_by_date | groupby('League') %}
      {% for league_group, matches in matches_by_league %}
        <div class="p-4 m-2 rounded-lg shadow">
          <div class="d-flex justify-content-around">
            {% for match in matches %}
            {% if loop.first %}
              <div>
                <img class="w-7 h-7 rounded-full mx-2" src="{{ match.flag_url }}" alt="{{ match.League }}">
            </div>
            {% endif %}
            {% endfor %}
            <div class="">{{ league_group }}</div>
            <div>{{ date_group }}</div>
          </div>
          <div class="d-flex justify-content-around m-2 p-2">
            <div>Local</div>
            <div>Visitor</div>
          </div>
          {% for match in matches %}
          <div class="m-2 d-flex justify-content-around px-2 search-teams" id="card-teams">
            <span class="col-5 text-center">{{ match.Local }}</span> 
            <span class="col text-center">-</span>
            <span class="col-5 text-center">{{ match.Visitor }}</span>
          </div>
          
          {% endfor %}
        </div>
      {% endfor %}
    {% endfor %}
  </div> 
{% endblock %}